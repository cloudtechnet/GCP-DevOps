# VPC Peering (GCP)

In **Google Cloud Platform (GCP)**, **VPC Peering** allows two separate VPC networks to **communicate privately using internal IP addresses**.

ğŸ‘‰ No public IP
ğŸ‘‰ No VPN
ğŸ‘‰ No internet involved

Traffic flows through Googleâ€™s private backbone.

---

# ğŸ¢ Real-World Example

### Scenario: Shared Services Architecture

A company has:

* VPC-1 â†’ Application VPC
* VPC-2 â†’ Database VPC

Requirement:

App servers in VPC-1 must connect to DB servers in VPC-2 privately.

Instead of:

* Exposing DB publicly âŒ
* Creating VPN âŒ

They use **VPC Peering**.

Now:
App VM (10.1.0.2) â†’ DB VM (10.2.0.2)
Direct private communication.

---

# ğŸ” How VPC Peering Works

1. Two VPCs establish a peering connection.
2. Routes are automatically created.
3. Internal IP traffic is exchanged.
4. No NAT, no gateway required.
5. Firewall rules still apply.

Important:

* IP ranges must NOT overlap.
* Peering is non-transitive.

---

# ğŸ§ª Step-by-Step Lab (From Scratch)

---

# Step 1ï¸âƒ£ Create First VPC

Go to:

VPC Network â†’ Create VPC

Configuration:

* Name: `vpc-app`
* Subnet mode: Custom
* Subnet:

  * Name: `app-subnet`
  * Region: us-central1
  * IP range: 10.1.0.0/24

Create.

---

# Step 2ï¸âƒ£ Create Second VPC

Create another VPC:

* Name: `vpc-db`
* Subnet:

  * Name: `db-subnet`
  * Region: us-central1
  * IP range: 10.2.0.0/24

Create.

âš  Ensure no overlapping IP ranges.

---

# Step 3ï¸âƒ£ Create VM in Each VPC

Create:

VM-1:

* Name: `app-vm`
* Network: vpc-app
* Subnet: app-subnet

VM-2:

* Name: `db-vm`
* Network: vpc-db
* Subnet: db-subnet

---

# Step 4ï¸âƒ£ Create VPC Peering Connection

Go to:

VPC Network â†’ VPC Peering â†’ Create Peering

From vpc-app:

* Peering name: `app-to-db`
* Peer network: vpc-db
* Enable route exchange

Create.

Now repeat from vpc-db:

* Peering name: `db-to-app`
* Peer network: vpc-app

Create.

Peering becomes ACTIVE.

---

# Step 5ï¸âƒ£ Configure Firewall Rules

In both VPCs:

Create ingress rule:

* Allow ICMP
* Source: 10.0.0.0/8 (or specific peer subnet)

---

# Step 6ï¸âƒ£ Test Connectivity

SSH into app-vm:

```id="w3z0ot"
ping 10.2.0.X
```

You should successfully reach db-vm internal IP.

No external IP needed.

---

# ğŸ”„ Traffic Flow Explanation

Before Peering:

app-vm â†’ db-vm âŒ Not reachable

After Peering:

app-vm (10.1.0.2)
â†“
Google backbone
â†“
db-vm (10.2.0.2)

No internet involved.

---

# ğŸ§  Important VPC Peering Rules

âœ” No overlapping CIDR ranges
âœ” Non-transitive
âœ” No centralized routing
âœ” Works across regions
âœ” Firewall rules still control access

---

# ğŸš« Non-Transitive Example

If:

VPC-A â†” VPC-B
VPC-B â†” VPC-C

VPC-A âŒ cannot reach VPC-C

Must create separate peering.

---

# ğŸ— Enterprise Use Case

Large organization:

* Dev VPC
* Prod VPC
* Shared Services VPC

All peer with Shared Services VPC.

Used for:

* Central logging
* Central monitoring
* Shared database access

---

# ğŸ“Œ Interview-Ready Explanation

VPC Peering allows private communication between two VPC networks using internal IP addresses without using VPN or internet. It requires non-overlapping IP ranges and is non-transitive.

---

# âœ… In Simple Words

VPC Peering:

* Connects two VPCs privately
* Uses internal IPs
* No internet required
* Must not overlap CIDR


