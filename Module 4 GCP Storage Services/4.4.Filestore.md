## Filestore

**Filestore** is the **fully managed file storage service** in **Google Cloud Platform (GCP)**. It provides **shared file storage** using the **NFS (Network File System)** protocol.

It is designed for applications that need a **shared filesystem across multiple VMs**.

---

## 1Ô∏è‚É£ What Is Filestore?

* Managed NFS-based file storage
* Accessible by multiple Compute Engine VMs
* Provides low-latency file access
* Fully managed (Google handles maintenance and scaling)

In simple terms:

üëâ **Filestore = Shared network drive for GCP VMs**

---

## 2Ô∏è‚É£ Why Use Filestore?

Unlike Persistent Disks:

* Persistent Disk ‚Üí Attached to one VM
* Filestore ‚Üí Shared across multiple VMs

It allows:

* Multiple servers to read/write the same files
* Centralized file management
* Easy lift-and-shift of legacy applications

---

## 3Ô∏è‚É£ Common Use Cases

* Web applications sharing uploaded files
* Content management systems (CMS)
* Media rendering workloads
* Legacy enterprise applications
* Kubernetes workloads needing shared storage

---

## 4Ô∏è‚É£ Key Features

### üîπ Fully Managed

* No manual NFS setup
* Automatic patching and maintenance

### üîπ High Performance

* Designed for consistent throughput
* Suitable for enterprise workloads

### üîπ Scalable

* Capacity can be increased
* Different performance tiers available

---

## 5Ô∏è‚É£ Filestore Tiers (Conceptual)

Filestore provides different performance levels based on:

* Capacity
* Throughput requirements
* Enterprise workload needs

Higher tiers = higher performance & cost.

---

## 6Ô∏è‚É£ Filestore vs Other Storage Types

| Storage Type    | Access Type | Best For       |
| --------------- | ----------- | -------------- |
| Object Storage  | HTTP/API    | Media, backups |
| Persistent Disk | Block       | Single VM      |
| Filestore       | NFS (File)  | Shared storage |

---

## 7Ô∏è‚É£ When NOT to Use Filestore

* For simple object storage needs
* For single-VM workloads
* For very large archival storage

---

## ‚úÖ In Simple Words

* Filestore provides **shared file storage**
* Uses **NFS protocol**
* Best for **multi-VM shared data environments**
* Fully managed and production-ready


# Step-by-Step Filestore Creation (GCP)

Below is a **clear, practical guide** to create and use **Filestore** in
**Google Cloud Platform**.

---

# ‚úÖ Method 1: Create Filestore Using Cloud Console (GUI)

## Step 1Ô∏è‚É£ Go to Filestore

* Open GCP Console
* Navigate to: **Storage ‚Üí Filestore**
* Click **Create Instance**

---

## Step 2Ô∏è‚É£ Basic Configuration

Fill in:

* **Instance ID** ‚Üí `my-filestore`
* **Region** ‚Üí Choose your region (example: `us-central1`)
* **Zone** ‚Üí Must match your VM zone (example: `us-central1-a`)
* **Tier** ‚Üí Select performance tier (Basic / Enterprise)

‚ö† Important: Filestore and VM must be in the same VPC network.

---

## Step 3Ô∏è‚É£ Configure File Share

* **File share name** ‚Üí `vol1`
* **Allocated capacity** ‚Üí Example: 1 TB (minimum depends on tier)

---

## Step 4Ô∏è‚É£ Network Configuration

* Select VPC network (default or custom)
* Choose IP range automatically or manually

Click **Create**
Wait 2‚Äì5 minutes for provisioning.

---

# ‚úÖ Step 5Ô∏è‚É£ Mount Filestore on Linux VM

Login to your VM (SSH).

Install NFS client if needed:

```bash
sudo apt update
sudo apt install nfs-common -y
```

Create mount directory:

```bash
sudo mkdir -p /mnt/filestore
```

Mount Filestore:

```bash
sudo mount FILSTORE_IP:/vol1 /mnt/filestore
```

Replace:

* `FILSTORE_IP` ‚Üí Internal IP shown in Filestore details
* `vol1` ‚Üí File share name

---

## Step 6Ô∏è‚É£ Verify Mount

```bash
df -h
```

You should see Filestore mounted.

---

# ‚úÖ Make Mount Persistent (Optional but Recommended)

Edit fstab:

```bash
sudo nano /etc/fstab
```

Add line:

```
FILSTORE_IP:/vol1 /mnt/filestore nfs defaults 0 0
```

Save and exit.

---

# ‚úÖ Method 2: Create Filestore Using gcloud CLI

```bash
gcloud filestore instances create my-filestore \
  --zone=us-central1-a \
  --tier=BASIC_HDD \
  --file-share=name="vol1",capacity=1TB \
  --network=name="default"
```

---

# üîé Important Requirements

‚úî VM and Filestore must be in same VPC
‚úî Firewall must allow internal traffic
‚úî Use internal IP for mounting

---

# üìå Real-Time Use Case

Example:

* 3 web servers
* All need access to `/uploads` folder
* Mount Filestore on all VMs
* Now they share the same files

---

# ‚úÖ In Simple Words

1. Create Filestore instance
2. Select region & tier
3. Create file share
4. Mount using NFS on VM
5. Use as shared storage

---
